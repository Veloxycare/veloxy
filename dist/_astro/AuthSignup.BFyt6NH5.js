import{j as e}from"./jsx-runtime.Dhsgnf4I.js";import{r as i}from"./index.uubelm5h.js";import{F as P,a as k}from"./index.BMNC_vuk.js";/* empty css                       */import{r as D,v as A,s as E}from"./auth.Z1yR82xO.js";import{Q as U,B as o}from"./react-toastify.esm.DZv44BnJ.js";/* empty css                       */import"./iconBase.DgWRTThF.js";import"./server.CoGzddUV.js";import"./clsx.B-dksMZM.js";const Q=()=>{const[s,m]=i.useState({name:"",email:"",password:"",country_code:"+1",phone_number:"",region:"US",userType:"patient",gender:"male"}),[n,h]=i.useState({name:"",email:"",password:"",country_code:"+1",phone_number:"",region:"US",userType:"patient",gender:"male"}),g={name:"",email:"",password:"",phone_number:"",userType:"patient",gender:"male"},[d,f]=i.useState(!1),[y,p]=i.useState(!1),[x,j]=i.useState(""),[b,t]=i.useState(!1),v=()=>{f(!d)},r=a=>{const{name:c,value:l}=a.target;m(u=>({...u,[c]:l}))},w=a=>{const{name:c,value:l}=a.target,[u,T]=l.split("-");m(F=>({...F,country_code:u,region:T}))},N=a=>{j(a.target.value)},C=async a=>{a.preventDefault();const c={...s,phone_number:`${s.country_code}${s.phone_number}`};h(c),t(!0);try{console.log("formDatass",s),(await D(c)).status===200&&(o.success("Registration Successful."),p(!0))}catch(l){t(!1),o.error(l.response?.data?.message||"An error occurred. Please try again.")}finally{t(!1)}},S=async()=>{t(!0);try{const a=await A(n.country_code,n.phone_number,x,n.userType);o.success("OTP verified successfully!"),p(!1),m(g),window.location.href="/"}catch(a){t(!1),o.error(a.response?.data?.message||"An error occurred. Please try again.")}finally{t(!1)}},O=async()=>{t(!0);try{await E(n.country_code,n.phone_number,n.userType),t(!1),o.success("OTP resent successfully!")}catch(a){t(!1),o.error(a.response?.data?.message||"An error occurred. Please try again.")}},_=()=>{window.history.replaceState(null,"","/login"),window.location.href="/login"};return e.jsx("div",{className:"container lg:max-w-[500px] mx-auto px-5 h-screen flex items-center justify-center",children:e.jsxs("div",{className:" w-full mx-auto  shadow-none p-5 bg-white lg:shadow-lg flex  flex-col   rounded-lg",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full  mt-5",children:[e.jsx("h2",{className:"text-center text-4xl font-bold leading-12 text-primary",children:"Signup"}),e.jsx("h2",{className:"mt-2 text-center text-lg font-normal leading-6 text-primary",children:"Create your account"})]}),e.jsxs("div",{className:"mt-0 sm:mx-auto sm:w-full ",children:[e.jsx("div",{className:"mt-1 sm:mx-auto sm:w-full ",children:e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-2 text-primary",children:"Name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"name",name:"name",type:"text",value:s.name,onChange:r,required:!0,className:"input-class sm:leading-2"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-2 text-primary",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:r,required:!0,autoComplete:"email",className:"input-class sm:leading-2"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-2 text-primary",children:"Password"})}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{id:"password",name:"password",type:d?"text":"password",value:s.password,onChange:r,required:!0,autoComplete:"current-password",className:"input-class sm:leading-2"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:v,children:d?e.jsx(P,{className:"h-5 w-5 text-gray-500"}):e.jsx(k,{className:"h-5 w-5 text-gray-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone_number",className:"block text-sm font-medium leading-2 text-primary",children:"Mobile Number"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsxs("select",{name:"country_code",value:`${s.country_code}-${s.region}`,onChange:w,className:"input-class w-20 md:basis-3/12 sm:leading-1 mr-2",children:[e.jsx("option",{value:"+1-US",children:"+1 (USA)"}),e.jsx("option",{value:"+1-CA",children:"+1 (Canada)"})]}),e.jsx("input",{id:"phone_number",name:"phone_number",type:"tel",value:s.phone_number,onChange:r,required:!0,className:"input-class md:basis-9/12 sm:leading-3"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"userType",className:"block text-sm font-medium leading-2 text-primary",children:"User Type"}),e.jsxs("select",{id:"userType",name:"userType",value:s.userType,onChange:r,required:!0,className:"input-class sm:leading-2",children:[e.jsx("option",{value:"driver",children:"Driver"}),e.jsx("option",{value:"patient",children:"Patient"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium leading-2 text-primary",children:"Gender"}),e.jsxs("select",{id:"gender",name:"gender",value:s.gender,onChange:r,className:"input-class sm:leading-2",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-primary px-3 py-3 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Sign up"})})]})}),e.jsxs("p",{className:"my-4 text-center text-sm text-gray-500",children:["Already have an account?"," ",e.jsx("span",{onClick:_,href:"/login",className:"font-semibold leading-2 text-primary cursor-pointer hover:text-indigo-500",children:"Sign in"})]})]}),y&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-10 rounded-lg text-center text-primary shadow-lg",children:[e.jsx("p",{className:"mt-2",children:"Youâ€™ve received a four digit code on"}),e.jsx("p",{className:"mt-1",children:s.phone_number}),e.jsx("p",{className:"mt-1",children:"Please enter it below to continue"}),e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Enter OTP"}),e.jsx("input",{type:"text",value:x,onChange:N,className:"input-class",placeholder:"Enter OTP"}),e.jsx("button",{onClick:S,className:"mt-3 w-full rounded-md bg-primary px-3 py-2 text-sm font-semibold text-white",children:"Submit OTP"}),e.jsx("button",{className:"mt-3 w-full rounded-md bg-primary px-3 py-2 text-sm font-semibold text-white",onClick:O,children:"Resend OTP"})]})}),b&&e.jsx("div",{className:"loader-container",children:e.jsx("div",{className:"loader"})}),e.jsx(U,{position:"top-right",autoClose:5e3,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0,theme:"light"})]})})};export{Q as default};
